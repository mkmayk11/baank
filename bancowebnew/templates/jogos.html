{% extends "base.html" %}
{% block conteudo %}
<div class="casino-background py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">

            <!-- Saldo -->
            <div class="card p-4 text-center shadow-lg mb-4" style="background:#1a1a1a; border-radius:20px; border:3px solid #ffdd00;">
                <h2 class="casino-title mb-3">üé≤ Saldo</h2>
                <p class="text-warning fw-bold">Saldo atual:</p>
                <h3 class="text-light">{{ saldo|round(2) }}</h3>
            </div>

            <!-- Ca√ßa-n√≠quel -->
            <div class="card p-4 text-center shadow-lg mb-4" style="background: radial-gradient(circle, #1a1a1a, #0d0d0d); border-radius:20px; border:3px solid #ffdd00;">
                <h2 class="casino-title mb-3">üé∞ Ca√ßa-n√≠quel Vegas</h2>
                
                <form method="POST" id="formCaca">
                    <div class="mb-3">
                        <input type="number" name="aposta_caca" id="apostaSlot" step="0.01" class="form-control form-control-lg text-center" placeholder="Valor da aposta" required style="font-size:1.2rem; border:2px solid #ffdd00; background:#222; color:#fff;">
                    </div>

                    <div class="slot-machine d-flex justify-content-center mb-3" style="gap:15px;">
                        <div class="reel" id="reel1">{{ rolos[0] if rolos|length>0 else "üçí" }}</div>
                        <div class="reel" id="reel2">{{ rolos[1] if rolos|length>1 else "üçã" }}</div>
                        <div class="reel" id="reel3">{{ rolos[2] if rolos|length>2 else "üîî" }}</div>
                    </div>

                    <div id="resultadoCaca" class="alert alert-dark mt-3" style="border:2px solid #ffdd00; color:#fff; font-weight:bold;">
                        {% if resultado_caca %}{{ resultado_caca }}{% endif %}
                    </div>

                    <button type="submit" class="btn btn-warning fw-bold mt-3" style="font-size:1.2rem; padding:10px 25px; border-radius:10px; box-shadow:0 0 10px #ffdd00;">Girar üé≤</button>
                </form>
            </div>

            <!-- Roleta -->
            <div class="card p-4 text-center shadow-lg mb-4" style="background: radial-gradient(circle, #1a1a1a, #0d0d0d); border-radius:20px; border:3px solid #ffdd00;">
                <h2 class="casino-title mb-3">üé° Roleta</h2>

                <form method="POST" id="formRoleta">
                    <div class="mb-3">
                        <input type="number" name="aposta_roleta" id="apostaRoleta" step="0.01" class="form-control form-control-lg text-center" placeholder="Valor da aposta" required style="font-size:1.2rem; border:2px solid #ffdd00; background:#222; color:#fff;">
                    </div>

                    <div class="mb-3">
                        <select name="numero_roleta" class="form-select form-select-lg text-center" required style="font-size:1.2rem; border:2px solid #ffdd00; background:#222; color:#fff;">
                            {% for i in range(0,37) %}
                                <option value="{{ i }}">{{ i }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div id="resultadoRoleta" class="alert alert-dark mt-3" style="border:2px solid #ffdd00; color:#fff; font-weight:bold;">
                        {% if resultado_roleta %}{{ resultado_roleta }}{% endif %}
                    </div>

                    <button type="submit" class="btn btn-warning fw-bold mt-3" style="font-size:1.2rem; padding:10px 25px; border-radius:10px; box-shadow:0 0 10px #ffdd00;">Girar üé°</button>
                </form>
            </div>

        </div>
    </div>
</div>

<style>
.casino-background {
    background: url('https://images.unsplash.com/photo-1601999135003-142d1f6aa391?auto=format&fit=crop&w=1950&q=80') no-repeat center center fixed;
    background-size: cover;
    min-height: 100vh;
}
.casino-title {
    color:#ffdd00;
    text-shadow:0 0 5px #fff,0 0 10px #ffdd00,0 0 20px #ffdd00,0 0 40px #ffdd00;
}
.reel {
    width:70px;
    height:70px;
    font-size:45px;
    line-height:70px;
    text-align:center;
    border-radius:10px;
    color:#fff;
    background:linear-gradient(145deg,#444,#000);
    border:2px solid #ffdd00;
    box-shadow:0 0 15px #ffdd00,0 0 30px #ffdd00 inset;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.reel.spin {
    animation: spinAnim 0.2s infinite;
}
@keyframes spinAnim {
    0% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0); }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const reels = [
        document.getElementById("reel1"),
        document.getElementById("reel2"),
        document.getElementById("reel3")
    ];
    const formCaca = document.getElementById("formCaca");
    const formRoleta = document.getElementById("formRoleta");

    const simbolos = [
        "üçí", "üçã", "üîî", "‚≠ê", "üíé", "üçÄ", "üçâ", "ü•≠",
        "üçá", "üçå", "üçì", "üçë", "üçç", "ü•ù", "ü••", "üçà", "üåà", "üé≤"
    ];

    formCaca.addEventListener("submit", function(e){
        e.preventDefault();
        reels.forEach(r => r.classList.add("spin"));

        let spins = 15;
        let intervalo = setInterval(() => {
            reels.forEach(r => r.textContent = simbolos[Math.floor(Math.random()*simbolos.length)]);
            spins--;
            if(spins <= 0){
                clearInterval(intervalo);
                reels.forEach(r => r.classList.remove("spin"));
                formCaca.submit();
            }
        }, 80);
    });

    // A roleta pode ser simples, s√≥ submit
});
</script>
{% endblock %}
