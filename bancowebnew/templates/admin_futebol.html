{% extends "base.html" %}
{% block conteudo %}
<div class="container py-4">
    <h2 class="mb-4">⚽ Administração de Futebol</h2>

    <!-- Formulário para adicionar jogo -->
    <div class="card mb-4 p-3 shadow-sm">
        <h5>Adicionar Novo Jogo</h5>
        <form method="POST">
            <div class="row g-3">
                <div class="col-md-3">
                    <input type="text" name="time1" class="form-control" placeholder="Time 1" required>
                </div>
                <div class="col-md-3">
                    <input type="text" name="time2" class="form-control" placeholder="Time 2" required>
                </div>
                <div class="col-md-2">
                    <input type="number" step="0.01" name="odds1" class="form-control" placeholder="Odd Time 1" required>
                </div>
                <div class="col-md-2">
                    <input type="number" step="0.01" name="odds_empate" class="form-control" placeholder="Odd Empate" required>
                </div>
                <div class="col-md-2">
                    <input type="number" step="0.01" name="odds2" class="form-control" placeholder="Odd Time 2" required>
                </div>
            </div>
            <div class="row g-3 mt-2">
                <div class="col-md-3">
                    <input type="number" step="0.01" name="odd_resultado" class="form-control" placeholder="Odd Resultado">
                </div>
                <div class="col-md-3">
                    <input type="number" step="0.01" name="odd_gols" class="form-control" placeholder="Odd Gols">
                </div>
                <div class="col-md-3">
                    <input type="number" step="0.01" name="odd_cartoes" class="form-control" placeholder="Odd Cartões">
                </div>
                <div class="col-md-3">
                    <input type="number" step="0.01" name="odd_expulsoes" class="form-control" placeholder="Odd Expulsões">
                </div>
            </div>
            <button type="submit" class="btn btn-success mt-3">Adicionar Jogo</button>
        </form>
    </div>

    <!-- Jogos existentes -->
    <h5 class="mb-3">Jogos Disponíveis</h5>
    <div class="list-group mb-4">
        {% for jogo in jogos %}
        <div class="list-group-item list-group-item-action flex-column align-items-start mb-2 shadow-sm">
            <div class="d-flex w-100 justify-content-between">
                <h6 class="mb-1">{{ jogo.time1 }} x {{ jogo.time2 }}</h6>
                <small>Ativo: {{ jogo.ativo }}</small>
            </div>
            <p class="mb-1">
                {% for mercado in jogo.mercados %}
                    {{ mercado.nome }}: {{ mercado.odd }}{% if not loop.last %} / {% endif %}
                {% endfor %}
            </p>
        </div>
        {% endfor %}
    </div>

    <!-- Apostas dos usuários -->
    <h5 class="mb-3">Últimas Apostas</h5>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Usuário</th>
                    <th>Valor</th>
                    <th>Escolha</th>
                    <th>Resultado</th>
                    <th>Jogo</th>
                    <th>Data</th>
                </tr>
            </thead>
            <tbody>
                {% for ap in apostas %}
                <tr>
                    <td>{{ ap.id }}</td>
                    <td>{{ ap.usuario }}</td>
                    <td>{{ ap.valor }}</td>
                    <td>{{ ap.escolha }}</td>
                    <td>{{ ap.resultado }}</td>
                    <td>
                        {% if ap.time1 and ap.time2 %}
                            {{ ap.time1 }} x {{ ap.time2 }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>{{ ap.criado_em_fmt }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
